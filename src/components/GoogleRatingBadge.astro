---
import { googleReviewData } from "@/data/reviews";

interface Props {
  class?: string;
}

const { class: className = "" } = Astro.props;
const { googleBusinessUrl, averageRating } = googleReviewData;
---

<a
  href={googleBusinessUrl}
  target="_blank"
  rel="noopener noreferrer"
  class:list={[
    "inline-flex items-center gap-1.5 rounded-full border border-border bg-background px-3 py-1.5 hover:shadow-sm transition-shadow no-underline",
    className,
  ]}
  aria-label={`${averageRating} out of 5 stars on Google Reviews`}
>
  <span class="text-sm font-bold text-foreground leading-none">{averageRating}</span>
  <span class="inline-flex items-center gap-px" aria-hidden="true">
    {/* 4 full stars */}
    {Array.from({ length: 4 }).map(() => (
      <svg width="14" height="14" viewBox="0 0 24 24" fill="#F4B400" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
      </svg>
    ))}
    {/* Partial star (~90% fill) using clip-path to avoid SVG gradient ID conflicts */}
    <span class="relative inline-block" style="width: 14px; height: 14px;">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="#D1D5DB" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
      </svg>
      <svg
        width="14"
        height="14"
        viewBox="0 0 24 24"
        fill="#F4B400"
        xmlns="http://www.w3.org/2000/svg"
        class="absolute inset-0"
        style="clip-path: inset(0 10% 0 0);"
      >
        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
      </svg>
    </span>
  </span>
  <span class="text-xs text-muted-foreground leading-none">Google</span>
</a>
